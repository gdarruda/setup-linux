- name: Upgrade all packages 
  dnf:
    name: "*"
    state: latest
- name: Adding tailscale repo
  shell: sudo dnf config-manager --add-repo https://pkgs.tailscale.com/stable/fedora/tailscale.repo
- name: Install tooling (e.g. vim, htop, zsh)
  dnf:
    name:
      - sqlite
      - neovim
      - htop
      - zsh
      - git
      - tmux
      - tailscale
    state: latest
- name: Set zsh as default shell
  user:
    name: gdarruda
    shell: /bin/zsh
- name: Clean Oh My Zsh
  file:
    path: ~/.oh-my-zsh
    state: absent
  become_user: gdarruda
- name: Install Oh My Zsh
  shell: wget https://raw.github.com/ohmyzsh/ohmyzsh/master/tools/install.sh -O - | sh
  become_user: gdarruda
- name: Configure Oh My Zsh
  copy:
     src: resources/.zshrc
     dest: ~/.zshrc
  become_user: gdarruda
- name: Settting git e-mail address
  shell: git config --global user.email "gabriel@gdarruda.me"
  become_user: gdarruda
- name: Settting git user name
  shell: git config --global user.name "Gabriel Arruda"
  become_user: gdarruda
- name: Enable/Start tailscale service
  systemd: 
    name: tailscaled
    state: started
    enabled: yes